(function(d){var b=(function(){var f,e;var h=function(l){e=l};var k=function(){f=Array();e=true;if(Modernizr.hashchange){d(window).bind("hashchange",function(){var l=document.URL.substr(document.URL.indexOf("#")+1);h(false);d("#image-scroller").smoothDivScroll("scrollToElement","id","_"+l)})}d("body").bind("hzscroll.activate",function(l){var m=d(l.target).children("a").attr("href");if(typeof m!=="undefined"){m=m.substring(m.indexOf("#")+2);g(m);if(e){i()}}})};var j=function(){return Modernizr.history};var g=function(l){console.log("Added "+l);f.push(l)};var i=function(){var m=f.pop();if(typeof m==="undefined"){return}var n={section:m},l="#"+m;console.log(n,m,l);if(j()){history.pushState(n,m,l);d("body").trigger("wow.themechange",n)}f=Array()};return{init:k,recordHistory:i,shouldRecord:h}}());var c=(function(){var h=function(){g()};var e=function(){return Modernizr.localstorage};var g=function(){d("body").on("wow.themechange",function(i,j){if(e()){localStorage.setItem("lastThemePlace",window.location.href)}})};var f=function(){if(e()){var i=JSON.parse(localStorage.getItem("lastThemePlace"));console.log(i);return i}};return{getLastThemePlace:f,init:h}}());var a=(function(){var f=null;var e={init:function(g){return this.each(function(){f=d(this);f.smoothDivScroll({touchScrolling:true,visibleHotSpotBackgrounds:"hover",mousewheelScrolling:"allDirections",mousewheelScrollingStep:70,countOnlyClass:".hz-item",setupComplete:function(j,i){f.hide().css("visibility","visible").fadeIn();d("div.scrollWrapper",f).scrollspy({target:".subthemenav"});b.init();if(window.location.hash==""){window.location.hash="home"}var h=d("#_"+window.location.hash.replace("#","")).get(0);if(h){f.smoothDivScroll("scrollToElement","id",h.id)}d('a[href*="#"]').click(function(m){m.preventDefault();var k=d(this).attr("href");var l=k.substring(k.indexOf("#")+1);b.shouldRecord(false);f.smoothDivScroll("scrollToElement","id",l)})},scrolledToElementId:function(h){b.recordHistory();b.shouldRecord(true);if(d("div.scroll-spacer").length>0){f.trigger("scroller.remove","div.scroll-spacer")}}});f.bind("dragstart",function(h){h.preventDefault()});d(document).bind("scroller.remove",function(i,j){d(document).trigger("scroller.beforeRemove",[j]);d(j).remove();f.smoothDivScroll("recalculateScrollableArea");d("div.scrollWrapper",f).data("scrollspy").refresh();var h=d("#_"+window.location.hash.replace("#","")).get(0);if(h){f.smoothDivScroll("jumpToElement","id",h.id)}d(document).trigger("scroller.afterRemove",[j])})})}};return e}());d.fn.scroller=function(e){if(a[e]){return a[e].apply(this,Array.prototype.slice.call(arguments,1))}else{if(typeof e==="object"||!e){return a.init.apply(this,arguments)}else{d.error("Method "+e+" does not exist on jQuery.scroller")}}};d(document).ready(function(){d("#image-scroller").scroller();c.init();d("body").on("wow.themechange",function(e,f){_gaq.push(["_trackEvent","themeView","navigateTo",f.section])});d("a.poster-modal").posterOverlay()})})(jQuery);(function(a){a.fn.posterOverlay=function(d){a.fn.posterOverlay.defaults={opacity:0.7,action:"click dblclick",dialog:"poster"};var b=this;d=a.extend({},a.fn.posterOverlay.defaults,d);a(b).bind(d.action,function(h){h.preventDefault();c(d.opacity,"body");var g=a('<div id="'+d.dialog+'"/>');a("body").prepend(g);a("#"+d.dialog).css("width","95%").css("height","95%");a("#"+d.dialog).center().css("display","block").css("background","#000").css("z-index","10001");f(a(this).attr("href"))});var c=function(g,i){var h=a("<div />").css("width",jQuery(document).width()+"px").css("height",jQuery(document).height()+"px").css("position","fixed").css("top","0").css("left","0").css("z-index","35").css("background","#fff").addClass("posteroverlay");a(i).prepend(h);h.fadeTo("fast",g)};var f=function(g){console.log("loading content "+g);var i=a("<iframe />").css("width","100%").css("height","100%").css("border","none").attr("src",g);var h=a("<a href='#close' class='posterclose'></a>").css("top","-15px").css("left","97.5%").css("z-index","10035");a("#"+d.dialog).prepend(h).append(i);a(".posterclose").bind("click",function(j){j.preventDefault();e("#"+d.dialog)})};a(document.documentElement).keyup(function(g){if(g.keyCode==27){e("#"+d.dialog)}});var e=function(g){a(g).find("a").remove();a(g).remove();a(".posteroverlay").remove()};jQuery.fn.center=function(){this.css("position","fixed");console.log(this.height());console.log(this.width());this.css("top",(jQuery(window).height()-this.height())/2+"px");this.css("left",(jQuery(window).width()-this.width())/2+"px");return this}}})(jQuery);